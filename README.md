# å®¶æ ¡äº’è”é—®å·ç³»ç»Ÿ

ä¸€å¥—åŸºäº Deno + TypeScript + Vue + Oak + Prisma + PostgreSQL çš„é—®å·è°ƒæŸ¥ç³»ç»Ÿã€‚

## åŠŸèƒ½ç‰¹æ€§

### ç®¡ç†ç«¯åŠŸèƒ½
- ğŸ“Š **é—®å·ç®¡ç†**ï¼šåˆ›å»ºã€ç¼–è¾‘ã€æŸ¥çœ‹é—®å·åˆ—è¡¨
- ğŸ“ˆ **ç»“æœç»Ÿè®¡**ï¼šæŸ¥çœ‹é—®å·æäº¤ç»Ÿè®¡å’Œè¯¦ç»†åˆ†æ
- ğŸ”— **é“¾æ¥åˆ†äº«**ï¼šç”Ÿæˆå…¬å¼€é—®å·é“¾æ¥ä¾›å®¶é•¿å¡«å†™
- ğŸ“‹ **åˆ†é¡µæ˜¾ç¤º**ï¼šæ”¯æŒå¤§æ•°æ®é‡çš„åˆ†é¡µæµè§ˆ

### ç”¨æˆ·ç«¯åŠŸèƒ½  
- ğŸ“ **ç®€å•å¡«å†™**ï¼šä»…éœ€å§“åå’Œå­¦å·å³å¯å‚ä¸
- â­ **å¤šç§é¢˜å‹**ï¼šæ”¯æŒæ˜Ÿçº§è¯„ä»·ï¼ˆ0-5æ˜Ÿï¼‰å’Œæ–‡æœ¬è¾“å…¥
- ğŸš« **é˜²é‡å¤æäº¤**ï¼šåŒä¸€ç”¨æˆ·åªèƒ½æäº¤ä¸€æ¬¡
- âœ… **å³æ—¶åé¦ˆ**ï¼šæäº¤æˆåŠŸåæ˜¾ç¤ºç¡®è®¤é¡µé¢

### æŠ€æœ¯ç‰¹ç‚¹
- ğŸ¦• **Deno ç”Ÿæ€**ï¼šä½¿ç”¨ç°ä»£ JavaScript è¿è¡Œæ—¶
- ğŸ”’ **ç±»å‹å®‰å…¨**ï¼šTypeScript å…¨è¦†ç›–
- ğŸ¨ **ç¾è§‚ç•Œé¢**ï¼šåŸºäº Ant Design Vue ç»„ä»¶åº“
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒç§»åŠ¨ç«¯è®¿é—®
- ğŸ—„ï¸ **æ•°æ®å¯é **ï¼šPostgreSQL + Prisma ORM
- ğŸ§ª **æµ‹è¯•è¦†ç›–**ï¼šåŒ…å«å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Deno 2.5+
- Node.js 18+ (ç”¨äºå®¢æˆ·ç«¯)
- PostgreSQL 14+
- Docker (å¯é€‰ï¼Œç”¨äºæ•°æ®åº“)

### 1. å¯åŠ¨æ•°æ®åº“

```bash
# ä½¿ç”¨ Docker Compose å¯åŠ¨ PostgreSQL
docker compose up -d
```

### 2. åç«¯è®¾ç½®

```bash
cd server

# å®‰è£… Prisma ä¾èµ–
npm install

# æ¨é€æ•°æ®åº“æ¨¡å¼
npx prisma db push

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
deno task dev
```

### 3. å‰ç«¯è®¾ç½®

```bash
cd client

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 4. è®¿é—®åº”ç”¨

- **ç®¡ç†ç•Œé¢**: http://localhost:5173/admin/surveys
- **API æ–‡æ¡£**: http://localhost:8000/health (å¥åº·æ£€æŸ¥)

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ client/                 # Vue å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/      # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ types.ts       # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ router/        # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                 # Deno åç«¯åº”ç”¨
â”‚   â”œâ”€â”€ routes/            # API è·¯ç”±
â”‚   â”œâ”€â”€ prisma/            # æ•°æ®åº“æ¨¡å¼
â”‚   â”œâ”€â”€ scripts/           # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ database.ts        # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ types.ts           # å…±äº«ç±»å‹
â”‚   â””â”€â”€ main.ts           # æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ docker-compose.yml     # æ•°æ®åº“æœåŠ¡
â””â”€â”€ README.md
```

## API æ¥å£

### é—®å·æ¥å£
- `GET /api/surveys` - è·å–é—®å·åˆ—è¡¨
- `POST /api/surveys` - åˆ›å»ºæ–°é—®å·
- `GET /api/surveys/:id` - è·å–é—®å·è¯¦æƒ…
- `POST /api/surveys/:id/submit` - æäº¤é—®å·å›ç­”
- `GET /api/surveys/:id/results` - è·å–é—®å·ç»“æœ

### ç”¨æˆ·æ¥å£
- `GET /api/users/by-id-number/:idNumber` - é€šè¿‡å­¦å·æŸ¥è¯¢ç”¨æˆ·

## æ•°æ®æ¨¡å‹

### æ ¸å¿ƒå®ä½“
- **Survey** - é—®å·ï¼ˆåŒ…å«å­¦å¹´ã€å­¦æœŸã€å‘¨æ¬¡ç­‰å±æ€§ï¼‰
- **Question** - é—®é¢˜ï¼ˆæ”¯æŒæ˜Ÿçº§å’Œæ–‡æœ¬ä¸¤ç§ç±»å‹ï¼‰
- **User** - ç”¨æˆ·ï¼ˆå§“åå’Œå­¦å·ï¼‰
- **Submission** - æäº¤è®°å½•ï¼ˆç¡®ä¿å”¯ä¸€æ€§çº¦æŸï¼‰
- **Answer** - ç­”æ¡ˆï¼ˆå…³è”é—®é¢˜å’Œæäº¤ï¼‰

## æµ‹è¯•

```bash
# è¿è¡Œåç«¯æµ‹è¯•
cd server
deno test -A --env

# è¿è¡Œå‰ç«¯æµ‹è¯•
cd client
npm run test
```

## éƒ¨ç½²

### ç”Ÿäº§ç¯å¢ƒå˜é‡

```env
DATABASE_URL="postgresql://user:password@host:5432/database"
PORT=8000
```

### æ„å»º

```bash
# æ„å»ºå‰ç«¯
cd client
npm run build

# ç¼–è¯‘åç«¯
cd server
deno task build
```

## å¼€å‘è¯´æ˜

### æ·»åŠ æ–°é—®é¢˜ç±»å‹

1. åœ¨ `types.ts` ä¸­æ‰©å±• `QuestionConfig` ç±»å‹
2. åœ¨å‰ç«¯ `UserSurveyForm.vue` ä¸­æ·»åŠ æ¸²æŸ“é€»è¾‘
3. åœ¨ `AdminCreateSurvey.vue` ä¸­æ·»åŠ é…ç½®é€‰é¡¹
4. æ›´æ–°ç»“æœç»Ÿè®¡é¡µé¢çš„å±•ç¤ºé€»è¾‘

### æ•°æ®åº“è¿ç§»

```bash
cd server
npx prisma db push  # å¼€å‘ç¯å¢ƒ
npx prisma migrate dev  # ç”Ÿäº§ç¯å¢ƒ
```

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼